---
title: LINUX Divers
---

import SimpleAuth from '@site/src/components/SimpleAuth';

<SimpleAuth>


**Cela vous forcera syslogÃ  "tourner" (c'est-Ã -dire crÃ©er un nouveau fichier journal et archiver le fichier journal prÃ©cÃ©dent) aprÃ¨s 1 jour ou lorsque le fichier atteint 1 Go, selon la premiÃ¨re Ã©ventualitÃ©. Notez que cela rotate 7signifie que votre systÃ¨me ne conservera que 7 syslogsauvegardes au total, de sorte qu'il ne peut occuper que 7 Go d'espace
Remarque : vous pouvez modifier maxsize, rotate Net d'autres paramÃ¨tres pour personnaliser vos journaux. Utilisez la commande man logrotatepour en savoir plus.**


# ğŸ“š Guide Technique Complet - Administration SystÃ¨me et Web

> **Auteur :** Gerard Etienne  
> **Date de crÃ©ation :** 2025-08-06  
> **DerniÃ¨re mise Ã  jour :** 2025-08-06 07:56:04 UTC  
> **Version :** 1.0

---

## ğŸ“‹ Table des MatiÃ¨res

1. [ğŸŒ Outils Web et Formatage](#-outils-web-et-formatage)
2. [ğŸ“ Gestion Moodle](#-gestion-moodle)
3. [ğŸ–¥ï¸ Administration Ubuntu](#ï¸-administration-ubuntu)
4. [ğŸ“¦ Compression et Archivage](#-compression-et-archivage)
5. [â˜ï¸ Configuration Cloud](#ï¸-configuration-cloud)
6. [ğŸ”§ Gestion Serveur Bitnami](#-gestion-serveur-bitnami)
7. [ğŸ” Recherche et Filtrage](#-recherche-et-filtrage)
8. [âš¡ Optimisation Apache](#-optimisation-apache)
9. [ğŸ›¡ï¸ SÃ©curitÃ© WordPress](#ï¸-sÃ©curitÃ©-wordpress)
10. [ğŸ˜ Gestion Versions PHP](#-gestion-versions-php)
11. [ğŸ“ Extraction Archives WordPress](#-extraction-archives-wordpress)

---

## ğŸŒ Outils Web et Formatage

### RÃ©indentation HTML

**Outil recommandÃ© :** [Code Beautify HTML Viewer](https://codebeautify.org/htmlviewer)

> ğŸ’¡ **Astuce :** Cet outil permet de formater et d'indenter automatiquement votre code HTML pour une meilleure lisibilitÃ©.

---

## ğŸ“ Gestion Moodle

### Mode Maintenance

#### âœ… Activer le mode maintenance
```bash
sudo -u www-data php admin/cli/maintenance.php --enable
```

#### âŒ DÃ©sactiver le mode maintenance
```bash
sudo -u www-data php admin/cli/maintenance.php --disable
```

### Mise Ã  jour Moodle

#### ğŸ”„ Mettre Ã  jour vers la version finale
```bash
sudo -u www-data php admin/cli/upgrade.php
```

### ğŸ§¹ Vider le cache Moodle
```bash
sudo -u www-data php admin/cli/purge_caches.php
```
> ğŸ“– **Documentation :** [Administration via Command Line](https://docs.moodle.org/39/en/Administration_via_command_line#Running_CLI_scripts)

### âš™ï¸ Configuration de redirection

Pour modifier l'URL de redirection **"mes cours"** :
```bash
nano /var/www/html/lib/navigationlib.php
```

### ğŸ”§ RÃ©solution d'erreurs aprÃ¨s migration

**Erreur frÃ©quente :**
```
Call to undefined function enrol_lti_get_fontawesome_icon_map();
```

**Solution :**
1. Vider le cache de Moodle avec la commande ci-dessus
2. RedÃ©marrer le serveur web si nÃ©cessaire

---

## ğŸ–¥ï¸ Administration Ubuntu

### ğŸŒ Afficher l'IP du serveur
```bash
hostname -I
```

### ğŸ”§ Mise Ã  jour plugin WordPress
```bash
wp plugin update jet-elements --version=2.6.9 --allow-root
```

---

## ğŸ“¦ Compression et Archivage

> ğŸ“– **Documentation complÃ¨te :** [Guide Linux - Archivage et Compression](https://linux.goffinet.org/administration/arborescence-de-fichiers/archivage-et-compression/)

### Options de compression

| Option | Description |
|--------|-------------|
| **z** | Compression **Gunzip** |
| **j** | Compression **Bzip2** |

### ğŸ“ CrÃ©er une archive compressÃ©e
```bash
tar cvzf usr_share_doc.tar.gz /usr/share/doc
```

### ğŸ“‚ Extraire une archive tar.gz
```bash
tar xvzf usr_share_doc.tar.gz
```

---

## â˜ï¸ Configuration Cloud

### ğŸ—„ï¸ S3 Storage Backup

#### Configuration des buckets

| Environnement | RÃ©gion | Bucket |
|---------------|--------|--------|
| **Moodle Studio** | Paris [eu-west-3] | `suiteadobe` |
| **MoodleV4** | La Cap [us-east-1] | `www-skiillz-com` |

#### ğŸ’¾ Bases de donnÃ©es
1. **admin** â†’ `moodle` (backup Moodle 4.0.5 + cours Mahandry)
2. **adminV3** â†’ `moodleV3`

### ğŸ“Š Google Tag Manager

**Guide complet :** [Configuration GTM avec Google Analytics](https://www.optimisation-conversion.com/webanalytics/guide-complet-configurer-google-tag-manager-google-analytics/)

---

## ğŸ”§ Gestion Serveur Bitnami

> ğŸ“– **Documentation officielle :** [Bitnami Control Services](https://docs.bitnami.com/aws/faq/administration/control-services/)

### ğŸ”„ Commandes de redÃ©marrage

#### RedÃ©marrer Apache uniquement
```bash
sudo /opt/bitnami/ctlscript.sh restart apache2
```

#### DÃ©marrer tous les services
```bash
sudo /opt/bitnami/ctlscript.sh start
```

#### RedÃ©marrer tous les services
```bash
sudo /opt/bitnami/ctlscript.sh restart
```

#### VÃ©rifier le statut des services
```bash
sudo /opt/bitnami/ctlscript.sh status
```

---

## ğŸ” Recherche et Filtrage

### ğŸ” Filtrer les erreurs avec Grep

#### Recherche basique
```bash
grep "error" fichier.txt
```

#### Recherche insensible Ã  la casse
```bash
grep -i "error" fichier.txt
```

#### Recherche multiple
```bash
grep -i -e "error" -e "erreur" fichier.txt
```

### ğŸ—‚ï¸ Recherche dans tous les fichiers d'un rÃ©pertoire

> ğŸ“– **Guide complet :** [Recherche de chaÃ®nes de caractÃ¨res sur Linux](https://www.journaldunet.fr/web-tech/developpement/1202655-comment-retrouver-tous-les-fichiers-contenant-une-chaine-de-caracteres-sur-linux/)

#### Syntaxe gÃ©nÃ©rale
```bash
grep -rnw 'dossier_de_recherche' -e 'expression_Ã _rechercher'
```

#### Exemple - Recherche dans les fichiers PHP
```bash
grep --include=*.php -rnw 'dossier_de_recherche' -e 'expression_Ã _rechercher'

# Exemple concret
grep --include=*.php -rnw 'woocommerce' -e '_fields'
```

---

## âš¡ Optimisation Apache

### ğŸš¨ Erreur MaxRequestWorkers

**Erreur :** `AH00161: server reached MaxRequestWorkers setting`

> ğŸ“– **RÃ©fÃ©rences :**
> - [Solution Stack Overflow 1](https://stackoverflow.com/questions/36924952/ah00161-server-reached-maxrequestworkers-setting-consider-raising-the-maxreque#comment66444651_37057176)
> - [Solution Stack Overflow 2](https://stackoverflow.com/questions/45344604/ubuntu-apache-error-server-reached-maxrequestworkers-on-increase-to-1024)

#### ğŸ”§ Solution recommandÃ©e

1. **Augmenter MaxRequestWorkers** de 150 Ã  500
2. **Augmenter ServerLimit** Ã  512 (dÃ©faut: 256)

```bash
cd /etc/apache2/mods-enabled
nano mpm_prefork.conf
systemctl restart apache2
```

**Configuration Ã  ajouter dans `mpm_prefork.conf` :**
```apache
ServerLimit 512
MaxRequestWorkers 500
```

---

## ğŸ›¡ï¸ SÃ©curitÃ© WordPress

### ğŸš« Bloquer les attaques XML-RPC

> ğŸ“– **Guide dÃ©taillÃ© :** [PrÃ©vention des attaques XML-RPC](https://linuxhostsupport.com/blog/how-to-prevent-xml-rpc-attacks-on-your-wordpress-site/)

#### ğŸ“ Fichier de configuration Apache
```
/etc/apache2/sites-available/000-default.conf
```

### MÃ©thodes de blocage XML-RPC

#### ğŸ” MÃ©thode 1 : wp-config.php

> ğŸ“– **RÃ©fÃ©rences :**
> - [Guide Bloginfos](https://bloginfos.com/desactiver-xml-rpc/)
> - [Guide Debugbar](https://www.debugbar.com/fr/bloquer-xml-rpc-wordpress/)
> - [Guide WinAstuce](https://www.winastuce.com/desactiver-xml-rpc-wordpress-proteger-attaques-ddos)

Ajouter Ã  la fin du fichier `wp-config.php` **aprÃ¨s** la derniÃ¨re instruction `ABSPATH` :
```php
add_filter('xmlrpc_enabled', '__return_false');
```

#### ğŸ” MÃ©thode 2 : functions.php

Ajouter dans le fichier `functions.php` du thÃ¨me ou dans un plugin spÃ©cifique :
```php
add_action("init", function() {
    global $pagenow; // get current page
    if ( !empty($pagenow) && "xmlrpc.php" === $pagenow ) {
        header("HTTP/1.1 403 Forbidden" ); // Produit une erreur 403
        exit; // exit request
    } 
    return;
});
```

### ğŸ“Š Compter les occurrences d'attaques

> ğŸ“– **Guide :** [Compter les occurrences - Linux](https://www.devkb.org/linux/55-Compter-le-nombre-d-occurence-d-un-mot-dans-un-fichier-Linux)

#### MÃ©thode 1
```bash
cat access.log.1 | grep "POST /xmlrpc.php" | wc -l
```

#### MÃ©thode 2 (recommandÃ©e)
```bash
grep -o 'POST /xmlrpc.php' access.log.1 | wc -l
```

---

## ğŸ˜ Gestion Versions PHP

### ğŸ” VÃ©rifier la version actuelle
```bash
php -v
```

### ğŸ“¦ Installation du dÃ©pÃ´t PHP
```bash
sudo add-apt-repository -y ppa:ondrej/php
sudo apt update
```

### ğŸ†• Installer une nouvelle version
```bash
sudo apt install php8.1
```

### ğŸ”„ Migration PHP 8.x vers PHP 7.x

> ğŸ“– **Guide complet :** [Switch Between Multiple PHP Versions](https://ostechnix.com/how-to-switch-between-multiple-php-versions-in-ubuntu/)

#### Ã‰tape 1 : DÃ©sactiver PHP 8.1
```bash
sudo a2dismod php8.1
```

#### Ã‰tape 2 : Activer PHP 7.4
```bash
sudo a2enmod php7.4
```

#### Ã‰tape 3 : DÃ©finir PHP 7.4 par dÃ©faut
```bash
sudo update-alternatives --set php /usr/bin/php7.4
sudo systemctl restart apache2
sudo service php7.4-fpm restart
sudo apt install php7.4-mysql php7.4-mbstring php7.4-xml php7.4-curl
```

#### ğŸ”§ Alternative : Choisir interactivement
```bash
sudo update-alternatives --config php
```

#### Ã‰tape finale : RedÃ©marrer Apache
```bash
sudo systemctl restart apache2
```

---

## ğŸ“ Extraction Archives WordPress

### ğŸ› ï¸ Outil wpress-extract

> ğŸ“– **Repository GitHub :** [wpress-extract](https://github.com/ofhouse/wpress-extract)

#### Installation locale
```bash
apt install npm
npm i -g wpress-extract
```

#### Utilisation
```bash
wpress-extract your-migration.wpress
```

---

## ğŸ“ Notes et Bonnes Pratiques

### âš ï¸ Avertissements Importants

- Toujours effectuer des **sauvegardes** avant les modifications
- Tester les changements sur un **environnement de dÃ©veloppement**
- Documenter toutes les modifications effectuÃ©es
- VÃ©rifier les **logs d'erreurs** aprÃ¨s chaque intervention

### ğŸ”— Ressources Utiles

| Ressource | Description |
|-----------|-------------|
| **Moodle Docs** | Documentation officielle Moodle |
| **Apache Docs** | Documentation serveur Apache |
| **Ubuntu Manpages** | Manuel des commandes Ubuntu |
| **Stack Overflow** | CommunautÃ© de dÃ©veloppeurs |

---

## ğŸ“ Support et Contact

Pour toute question ou problÃ¨me technique, n'hÃ©sitez pas Ã  consulter :
- Les logs systÃ¨me : `/var/log/`
- Les logs Apache : `/var/log/apache2/`
- Les logs Moodle : `[moodle]/admin/tool/log/`

---







# â˜ï¸ Guide d'Administration AWS et SystÃ¨me

> **Auteur :** Gerard Etienne  
> **Date de crÃ©ation :** 2025-08-06  
> **DerniÃ¨re mise Ã  jour :** 2025-08-06 08:00:43 UTC  
> **Version :** 2.0

---

## ğŸ“‹ Table des MatiÃ¨res

1. [ğŸ—ï¸ Configuration AWS](#ï¸-configuration-aws)
2. [ğŸ›¡ï¸ SÃ©curitÃ© Apache et htaccess](#ï¸-sÃ©curitÃ©-apache-et-htaccess)
3. [âš¡ Monitoring et Performance](#-monitoring-et-performance)
4. [ğŸš€ DÃ©veloppement React](#-dÃ©veloppement-react)
5. [ğŸ—„ï¸ Base de DonnÃ©es MySQL](#ï¸-base-de-donnÃ©es-mysql)
6. [ğŸ“Š Analyse de Logs](#-analyse-de-logs)
7. [ğŸ”§ Configuration Serveur Web](#-configuration-serveur-web)
8. [ğŸŒ Outils et Utilitaires](#-outils-et-utilitaires)

---

## ğŸ—ï¸ Configuration AWS

### ğŸ“– Documentation Officielle
**Guide de sauvegarde S3 :** [AWS S3 CLI Backup Tutorial](https://aws.amazon.com/fr/getting-started/hands-on/backup-to-s3-cli/)

### ğŸ—„ï¸ Connexions Base de DonnÃ©es RDS

#### Endpoint de connexion
```
skiillz-testv1.crnkf2phow3d.eu-west-1.rds.amazonaws.com
```

#### ğŸ”Œ Commandes de connexion MySQL
```bash
# Connexion standard
mysql -u admin -p -h skiillz-testv1.crnkf2phow3d.eu-west-1.rds.amazonaws.com

# Connexion avec base spÃ©cifiÃ©e
mysql -u admin -p -h skiillz-testv1.crnkf2phow3d.eu-west-1.rds.amazonaws.com -D nom_base
```

---

## ğŸ›¡ï¸ SÃ©curitÃ© Apache et htaccess

### ğŸš« Bloquer une adresse IP

> ğŸ“– **Guide complet :** [htaccess WordPress - WP Marmite](https://wpmarmite.com/htaccess-wordpress/)

#### Configuration htaccess pour blocage IP
```apache
<Limit GET POST>
    order allow,deny
    deny from xxx.xxx.xxx.xxx
    allow from all
</Limit>
```

### â¬†ï¸ Mise Ã  jour Apache2

> ğŸ“– **RÃ©fÃ©rences :**
> - [Upgrade Apache Ubuntu](https://www.linuxcapable.com/upgrade-apache-on-ubuntu-linux/)
> - [Fix Apache2 Common Problems](https://upcloud.com/resources/tutorials/fix-common-problems-apache2)

#### ğŸ”„ Commandes de mise Ã  jour
```bash
# Mise Ã  jour gÃ©nÃ©rale du systÃ¨me
sudo apt upgrade

# Mise Ã  jour spÃ©cifique d'Apache2
sudo apt upgrade apache2

# Rechargement de la configuration
sudo systemctl reload apache2
```

---

## âš¡ Monitoring et Performance

### ğŸ§  Script de surveillance RAM

#### ğŸ“§ Configuration d'alerte email
```bash
swaks -t "gerard@eufonie.fr,herison@eufonie.fr,jules@eufonie.fr" \
      -s smtp.gmail.com:587 -tls \
      -au fanomezantsoa542@gmail.com \
      -ap your_mdp_app \
      -f fanomezantsoa542@gmail.com \
      --h-Subject "Alert Memoire serveur SKIILLZ" \
      --body "Votre utilisation de mÃ©moire RAM atteint plus de 80% de votre ressource disponible pour Ã©viter les pannes de serveur, vous devez vÃ©rifier les requÃªtes en cours d'exÃ©cution !"
```

#### ğŸ“Š Script de vÃ©rification RAM
```bash name=checkRam.sh
#!/bin/bash

# Obtient le pourcentage d'utilisation de la mÃ©moire RAM
ram_usage=$(free | awk '/Mem/ {printf("%.2f"), $3/$2 * 100}')

# VÃ©rifie si l'utilisation de la RAM dÃ©passe 80%
if (( $(echo "$ram_usage > 80.0" | bc -l) )); then
    # Envoyer un message d'alerte si la mÃ©moire RAM atteint plus de 80%
    sudo service apache2 restart
    echo "Le service Apache a Ã©tÃ© redÃ©marrÃ©."
else
    echo "L'utilisation de la RAM est infÃ©rieure Ã  80%."
fi
```

#### â° Configuration Cron (exÃ©cution toutes les 15 minutes)
```bash
*/15 * * * * /var/www/skiillz/checkRam.sh >/dev/null 2>&1
```

### ğŸ’» Surveillance CPU
```bash
# Top 5 des processus utilisant le plus de CPU
top -o %CPU -n 1 | head -n 12
```

---

## ğŸš€ DÃ©veloppement React

### ğŸ“Š Composants et Outils

#### Progress Bar pour chargement de pages
> ğŸ“– **Tutorial :** [React Progress Bar on Route Changing](https://dev.to/ataparvinghods/react-progress-bar-on-route-changing-both-next-cra-3d27)

#### ğŸ¨ Styles CSS pour boutons
> ğŸ“– **Ressource :** [Boutons CSS - ZoneCSS](https://www.zonecss.fr/laboratoire-css/boutons-en-css.html)

### ğŸ” Hooks et API React

#### useQuery React
> ğŸ“– **Documentations :**
> - [useQuery React Guide](https://builtin.com/software-engineering-perspectives/use-query-react)
> - [TanStack Query v3](https://tanstack.com/query/v3/docs/react/guides/queries)
> - [TanStack Overview](https://tanstack.com/query/v3/docs/react/overview)

#### âš¡ React Lazy Loading et Suspense
> ğŸ“– **Guide complet :** [React Lazy Loading with Suspense](https://refine.dev/blog/react-lazy-loading/)

#### ğŸš¨ Error Boundaries
> ğŸ“– **Documentation :** [React TypeScript Error Boundaries](https://react-typescript-cheatsheet.netlify.app/docs/basic/getting-started/error_boundaries/)

#### ğŸ–¼ï¸ Optimisation d'images Next.js
> ğŸ“– **Guide officiel :** [Next.js Image Optimization](https://nextjs.org/docs/pages/building-your-application/optimizing/images)

---

## ğŸ—„ï¸ Base de DonnÃ©es MySQL

### ğŸ”’ Gestion des Verrous InnoDB

> ğŸ“– **RÃ©fÃ©rences :**
> - [Setting innodb_lock_wait_timeout](https://www.ebhor.com/setting-innodb_lock_wait_timeout/)
> - [Stack Overflow - Lock Wait Timeout](https://stackoverflow.com/questions/2766785/fixing-lock-wait-timeout-exceeded-try-restarting-transaction-for-a-stuck-my)

#### ğŸ” VÃ©rification des paramÃ¨tres InnoDB
```sql
-- Voir la valeur par dÃ©faut (dÃ©faut: 50)
SHOW VARIABLES LIKE 'innodb_lock_wait_timeout';

-- Alternative 1
SHOW GLOBAL VARIABLES LIKE '%INNODB_LOCK_WAIT_TIMEOUT%';

-- Alternative 2
SELECT @@innodb_lock_wait_timeout;
```

#### ğŸ“Š Diagnostic des verrous
```sql
-- VÃ©rifier l'Ã©tat d'InnoDB pour les verrous
SHOW ENGINE InnoDB STATUS;

-- VÃ©rifier les tables ouvertes
SHOW OPEN TABLES WHERE In_use > 0;

-- Liste des processus SQL
SHOW PROCESSLIST;

-- Transactions InnoDB en attente
SELECT * FROM `information_schema`.`innodb_trx` ORDER BY `trx_started`;

-- DÃ©pendance des verrous
SELECT * FROM `information_schema`.`innodb_locks`;
```

#### âš™ï¸ Modification du timeout
```sql
-- Configuration globale
SET GLOBAL innodb_lock_wait_timeout = 100;

-- Configuration de session
SET SESSION innodb_lock_wait_timeout = 100;
```

---

## ğŸ“Š Analyse de Logs

### ğŸ” Techniques Grep avancÃ©es

#### Filtrage par adresse IP
> ğŸ“– **Guide :** [Grep IP Address in Log Files](https://www.sentinelone.com/blog/grep-ip-address-log-file/)

```bash
# Recherche d'IP exacte
grep 46.72.177.4 access.log

# Recherche en dÃ©but de ligne
grep "^46.72.177.4" access.log

# Compter les occurrences
grep "^154.126.16.65 " /var/log/apache2/access.log | wc -l
grep "^MaxRequestWorkers" /var/log/apache2/error.log | wc -l
```

#### ğŸ“ˆ Surveillance en temps rÃ©el
```bash
# Filtrer par IP en temps rÃ©el
tail -f /var/log/apache2/access.log | grep 192.168.206.1

# Exclure les fichiers statiques
tail -f /var/log/apache2/error.log | egrep -v "(.gif|.jpg|.png|.swf|.ico)"
```

### ğŸ“Š GoAccess pour analyse de trafic

> ğŸ“– **Guide :** [Analyse visiteurs Ubuntu](https://fr.linux-console.net/?p=7105#gsc.tab=0)

#### Installation
```bash
apt-get install goaccess
```

#### Utilisation
```bash
# Analyse basique Apache2
goaccess /var/log/apache2/access.log

# Rapport HTML temps rÃ©el
goaccess /var/log/apache2/access.log \
         -o /var/www/skiillz/report.html \
         --log-format=COMMON \
         --real-time-html
```

### ğŸ§¹ Nettoyage automatique des logs
```bash
# Supprimer les fichiers de log avec index > 2
find . -name "error.log.*.gz" \
       -type f \
       -regextype posix-extended \
       -regex ".*error\.log\.[0-9]+\.gz" \
       -printf "%f\n" | awk -F'.' '$NF > 2' | xargs rm -f
```

---

## ğŸ”§ Configuration Serveur Web

### ğŸ”„ Migration Apache2 vers Nginx

#### DÃ©marrage des services
```bash
# DÃ©marrer Nginx
sudo systemctl start nginx

# RedÃ©marrer PHP-FPM
sudo /etc/init.d/php7.4-fpm restart
# ou
sudo service php7.4-fpm restart

# CrÃ©er lien symbolique pour site
sudo ln -s /etc/nginx/sites-available/skiillzv2 /etc/nginx/sites-enabled/
```

#### ğŸ”§ Configuration Apache2 (ports personnalisÃ©s)
```apache
# Configuration HTTP sur port 1800
<VirtualHost *:1800>
    ServerName skiillzv2
    ServerAlias www.skiillzv2
    ServerAdmin webmaster@localhost
    DocumentRoot /var/www/skiillzv2
    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
    
    RewriteEngine on
    RewriteCond %{SERVER_NAME} =skiillzv2 [OR]
    RewriteCond %{SERVER_NAME} =www.skiillzv2 [OR]
    RewriteCond %{SERVER_NAME} =testpreprod.skiillz.com
    RewriteRule ^ https://%{SERVER_NAME}%{REQUEST_URI} [END,NE,R=permanent]
</VirtualHost>

# Configuration HTTPS sur port 4433
<IfModule mod_ssl.c>
<VirtualHost *:4433>
    ServerName skiillzv2
    ServerAlias www.skiillzv2 testpreprod.skiillz.com
    ServerAdmin webmaster@localhost
    DocumentRoot /var/www/skiillzv2
    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
    
    SSLCertificateFile /etc/letsencrypt/live/testpreprod.skiillz.com/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/testpreprod.skiillz.com/privkey.pem
    Include /etc/letsencrypt/options-ssl-apache.conf
</VirtualHost>
</IfModule>
```

#### ğŸ” Commandes de diagnostic
```bash
# Voir les ports utilisÃ©s par Nginx
sudo ps -elf | grep nginx

# Voir tous les modules Apache2
dpkg --get-selections | grep apache
```

### ğŸ›¡ï¸ Fail2Ban pour sÃ©curitÃ©

> ğŸ“– **Guide :** [Installer et paramÃ©trer Fail2Ban](https://buzut.net/installer-et-parametrer-fail2ban/)

```bash
apt install fail2ban
```

### ğŸ“ Gestion des archives
```bash
# DÃ©compresser fichier .gz
gzip -d file.gz
```

### âš™ï¸ WordPress Cron Optimisation

> ğŸ“– **Guide :** [WP-Cron vs Crontab](https://easyengine.io/tutorials/wordpress/wp-cron-crontab/)

#### DÃ©sactiver WP-Cron natif
```php
// Ajouter dans wp-config.php
define('DISABLE_WP_CRON', true);
```

#### Configurer Cron systÃ¨me
```bash
# Avec PHP (toutes les 10 minutes)
*/10 * * * * cd /var/www/skiillz; /usr/bin/php /var/www/skiillz/wp-cron.php?doing_wp_cron > /dev/null 2>&1

# Avec WP CLI (toutes les 10 minutes)
*/10 * * * * cd /var/www/skiillz; wp cron event run --due-now > /dev/null 2>&1
```

---

## ğŸŒ Outils et Utilitaires

### ğŸ”¢ Calculateur de pourcentage
[Calculateur en ligne HelloSafe](https://hellosafe.ca/outils/calcul-pourcentage)

### ğŸ·ï¸ Google Tag Assistant
[Tag Assistant Google](https://tagassistant.google.com/)

### ğŸ“§ Configuration Gmail
> ğŸ“– **Guide :** [Modifier mot de passe Gmail](https://support.google.com/mail/answer/41078?hl=fr&co=GENIE.Platform%3DDesktop)
> ğŸ” **Gestion compte :** [Google Account Security](https://myaccount.google.com/signinoptions/password)

### ğŸŒ Ngrok pour tunneling

#### ğŸ“ Identifiants
- **Email :** `Rafanomezantsoa4xxxxx@gmail.com`
- **Mot de passe :** `mon_mail_prod + ##**`

#### ğŸš€ Configuration et utilisation
> ğŸ“– **Documentation :** [Ngrok Setup Guide](https://dashboard.ngrok.com/get-started/setup)

```bash
# 1. Installation globale
npm install ngrok -g

# 2. Ajouter authtoken (depuis dashboard ngrok)
ngrok config add-authtoken <votre_auth_token>

# 3. Lancer tunnel sur port 3000
ngrok http 3000

# Alternative avec npm script
npm run ngrok
```

### ğŸ—ºï¸ Sitemap et SEO
> ğŸ“– **Guide indexation :** [Temps d'indexation Google](https://www.panierdachat.com/blogue/combien-de-temps-met-google-a-indexer-votre-site-web-ou-le-mettre-a-jour/)

**Exemple sitemap :** [https://www.eufonie.fr/page-sitemap.xml](https://www.eufonie.fr/page-sitemap.xml)

### ğŸ” VPN Configuration
```
Identifiant : user-rua138
Mot de passe : EfUsr(@)#695
```

### ğŸ›¡ï¸ Windows Defender CLI
> ğŸ“– **Manuel technique :** [Windows Defender en ligne de commande](https://www.malekal.com/comment-utiliser-windows-defender-en-ligne-de-commande-mpcmdrun/)

### ğŸ”„ Redirections htaccess
> ğŸ“– **Guide complet :** [Redirection 301 htaccess](https://www.blogdumoderateur.com/redirection-301-htaccess/)

---

## ğŸ“– RÃ©fÃ©rences et Ressources

### ğŸ“š Documentations Officielles
| Service | Documentation |
|---------|---------------|
| **Apache2** | [Linux Goffinet - Apache HTTP Server](https://linux.goffinet.org/services/apache-http-server/) |
| **AWS RDS** | [Amazon RDS Documentation](https://docs.aws.amazon.com/rds/) |
| **MySQL** | [MySQL Official Documentation](https://dev.mysql.com/doc/) |
| **Nginx** | [Nginx Official Documentation](https://nginx.org/en/docs/) |

### âš ï¸ Notes Importantes
- **Toujours** effectuer des sauvegardes avant modifications
- **Tester** sur environnement de dÃ©veloppement
- **Surveiller** les logs aprÃ¨s modifications
- **Documenter** toutes les configurations

---

## ğŸ”§ Maintenance et Support

### ğŸ“Š Surveillance continue
- VÃ©rification quotidienne des logs d'erreur
- Monitoring de l'utilisation RAM/CPU
- ContrÃ´le des performances base de donnÃ©es
- Analyse du trafic avec GoAccess

### ğŸš¨ ProcÃ©dures d'urgence
1. **RedÃ©marrage services** en cas de surcharge
2. **Nettoyage logs** si espace disque faible  
3. **Blocage IP** en cas d'attaque
4. **Basculement** vers serveur de secours si nÃ©cessaire

---

*Document gÃ©nÃ©rÃ© le 2025-08-06 08:00:43 UTC - Version 2.0*





# ğŸ–¥ï¸ Guide AvancÃ© de Configuration Serveur

> **Auteur :** Gerardetienne  
> **Date de crÃ©ation :** 2025-08-06  
> **DerniÃ¨re mise Ã  jour :** 2025-08-06 08:03:09 UTC  
> **Version :** 3.0

---

## ğŸ“‹ Table des MatiÃ¨res

1. [ğŸ” Diagnostic et Monitoring](#-diagnostic-et-monitoring)
2. [ğŸ”§ Configuration Apache2](#-configuration-apache2)
3. [ğŸš€ Migration Apache2 vers Nginx](#-migration-apache2-vers-nginx)
4. [ğŸ›¡ï¸ SÃ©curitÃ© Nginx](#ï¸-sÃ©curitÃ©-nginx)
5. [ğŸ¦  SÃ©curitÃ© et Antivirus](#-sÃ©curitÃ©-et-antivirus)
6. [âš™ï¸ DÃ©ploiement et Outils](#ï¸-dÃ©ploiement-et-outils)
7. [ğŸ“… Gestion des TÃ¢ches Cron](#-gestion-des-tÃ¢ches-cron)

---

## ğŸ” Diagnostic et Monitoring

### ğŸŒ VÃ©rification des ports utilisÃ©s par Nginx
```bash
netstat -ntpl
```

### ğŸŒ Obtenir l'IP publique du serveur
```bash
curl -4 icanhazip.com
```

### ğŸ“Š VÃ©rification du statut des services
```bash
# Statut Nginx
systemctl status nginx

# Statut Apache2
systemctl status apache2

# Statut PHP-FPM
systemctl status php7.4-fpm
```

---

## ğŸ”§ Configuration Apache2

### ğŸ”Œ Changer le port d'Ã©coute d'Apache2

> ğŸ“– **Documentation :** [Changer le port d'Ã©coute Apache2](https://www.it-connect.fr/changer-le-port-decoute-dapache2/)

#### Ã‰tape 1 : Modifier le fichier de configuration des ports
```bash
sudo nano /etc/apache2/ports.conf
```

#### Ã‰tape 2 : Modifier le Virtual Host
```bash
sudo nano /etc/apache2/sites-enabled/skiillzv2.conf
```

### ğŸ› ï¸ RÃ©solution d'erreurs courantes

#### Erreur de verrou dpkg
**Erreur :** `Waiting for cache lock: Could not get lock /var/lib/dpkg/lock-frontend`

##### ğŸ” Identifier le processus
```bash
ps aux | grep -i apt
```

##### âš¡ ArrÃªter le processus
```bash
sudo kill -9 628050
```

##### ğŸ”§ Corriger les paquets
```bash
sudo dpkg --configure -a
```

---

## ğŸš€ Migration Apache2 vers Nginx

> ğŸ“– **Guides de rÃ©fÃ©rence :**
> - [Install Nginx Ubuntu 22.04 - DigitalOcean](https://www.digitalocean.com/community/tutorials/how-to-install-nginx-on-ubuntu-22-04)
> - [WordPress LEMP Stack - LinuxBabe](https://www.linuxbabe.com/ubuntu/install-wordpress-ubuntu-20-04-nginx-mariadb-php7-4-lemp)
> - [WordPress Nginx Configuration](https://www.nginx.com/resources/wiki/start/topics/recipes/wordpress/)

### ğŸ›‘ Ã‰tape 1 : ArrÃªter et dÃ©sactiver Apache2
```bash
# ArrÃªter Apache2
sudo service apache2 stop
sudo systemctl stop apache2
sudo systemctl disable apache2

# Nettoyage et mise Ã  jour
sudo apt clean all && sudo apt update && sudo apt dist-upgrade
```

### ğŸ“¦ Ã‰tape 2 : Installation de Nginx et PHP-FPM
```bash
# Installer Nginx
sudo apt install nginx

# Installer PHP-FPM
sudo apt-get install php7.4-fpm
```

### ğŸ”¥ Ã‰tape 3 : Configuration du pare-feu
```bash
# Voir les profils disponibles
sudo ufw app list

# Autoriser le trafic HTTP
sudo ufw allow 'Nginx HTTP'

# Autoriser le trafic HTTPS (si nÃ©cessaire)
sudo ufw allow 'Nginx HTTPS'
```

### âš™ï¸ Ã‰tape 4 : Configuration du site
```bash
# CrÃ©er le fichier de configuration
sudo nano /etc/nginx/sites-available/skiillzv2.conf
```

#### ğŸ“ Configuration Nginx pour WordPress
```nginx
# Configuration HTTPS
server {
    server_name testpreprod.skiillz.com;
    root /var/www/skiillzv2;
    index index.php index.html;

    # Optimisation favicon et robots.txt
    location = /favicon.ico {
        log_not_found off;
        access_log off;
    }

    location = /robots.txt {
        allow all;
        log_not_found off;
        access_log off;
    }

    # Configuration principale WordPress
    location / {
        autoindex on;
        try_files $uri $uri/ /index.php?$args;
    }

    # Configuration PHP-FPM
    location ~ \.php$ {
        include fastcgi_params;
        fastcgi_intercept_errors on;
        fastcgi_pass unix:/run/php/php7.4-fpm.sock;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    }

    # Cache des fichiers statiques
    location ~* \.(js|css|png|jpg|jpeg|gif|ico)$ {
        expires max;
        log_not_found off;
    }

    # Configuration SSL (gÃ©rÃ©e par Certbot)
    listen 443 ssl;
    ssl_certificate /etc/letsencrypt/live/testpreprod.skiillz.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/testpreprod.skiillz.com/privkey.pem;
    include /etc/letsencrypt/options-ssl-nginx.conf;
    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem;
}

# Redirection HTTP vers HTTPS
server {
    if ($host = testpreprod.skiillz.com) {
        return 301 https://$host$request_uri;
    }

    server_name testpreprod.skiillz.com;
    root /var/www/skiillzv2;
    listen 80;
    return 404;
}
```

### ğŸ”— Ã‰tape 5 : Activation du site
```bash
# CrÃ©er le lien symbolique
sudo ln -s /etc/nginx/sites-available/skiillzv2.conf /etc/nginx/sites-enabled/

# VÃ©rifier que PHP-FPM socket existe
ls /run/php/php7.4-fpm.sock
```

### âœ… Ã‰tape 6 : Validation et activation
```bash
# Tester la configuration Nginx
nginx -t

# Modifier la configuration principale si nÃ©cessaire
sudo nano /etc/nginx/nginx.conf
# DÃ©commenter : server_names_hash_bucket_size 64;

# RedÃ©marrer les services
sudo systemctl restart nginx
sudo service php7.4-fpm restart

# Activer Nginx au dÃ©marrage
sudo systemctl enable nginx
```

---

## ğŸ›¡ï¸ SÃ©curitÃ© Nginx

> ğŸ“– **Guides de sÃ©curitÃ© :**
> - [Nginx WordPress Security Rules](https://www.hongkiat.com/blog/nginx-rules-for-wordpress-security/)
> - [WordPress Nginx Security Best Practices](https://stackoverflow.com/questions/63753876/wordpress-nginx-security-best-practice)
> - [Nginx WordPress Official Guide](https://www.nginx.com/resources/wiki/start/topics/recipes/wordpress/)

### ğŸ”’ Configuration de sÃ©curitÃ© recommandÃ©e
```nginx
# Bloquer l'accÃ¨s aux fichiers sensibles
location ~ /\. {
    deny all;
    access_log off;
    log_not_found off;
}

# Bloquer l'accÃ¨s Ã  wp-config.php
location ~* wp-config\.php {
    deny all;
}

# Bloquer l'accÃ¨s aux fichiers de sauvegarde
location ~* \.(bak|backup|old|temp)$ {
    deny all;
}

# Limiter les mÃ©thodes HTTP
if ($request_method !~ ^(GET|HEAD|POST)$ ) {
    return 405;
}
```

---

## ğŸ¦  SÃ©curitÃ© et Antivirus

### ğŸ” DÃ©tection de code malveillant

#### Recherche de fichiers modifiÃ©s rÃ©cemment
```bash
# Fichiers modifiÃ©s dans les 2 derniers jours
find /var/www/skiillzv2 -type f -mtime -2
```

#### ğŸ” Recherche de fonctions PHP suspectes
```bash
# Recherche de fonctions dangereuses
grep -r --include=*.php "base64_decode" /var/www/skiillzv2
grep -r --include=*.php "eval(" /var/www/skiillzv2
grep -r --include=*.php "shell_exec" /var/www/skiillzv2
grep -r --include=*.php "assert(" /var/www/skiillzv2
grep -r --include=*.php "passthru(" /var/www/skiillzv2
```

### ğŸ¦  Installation et utilisation d'antivirus

#### Installation de ClamAV
```bash
sudo apt update && sudo apt install clamav -y
```

#### ğŸ” Scan antivirus complet
```bash
# Mise Ã  jour des dÃ©finitions virales
sudo freshclam

# Scan rÃ©cursif du rÃ©pertoire web
sudo clamscan -r /var/www/skiillzv2

# Scan avec suppression automatique des virus
sudo clamscan -r --remove /var/www/skiillzv2
```

---

## âš™ï¸ DÃ©ploiement et Outils

### ğŸš€ DÃ©ploiement Strapi
> ğŸ“– **Documentation officielle :** [Strapi Deployment Guide](https://docs.strapi.io/dev-docs/deployment)

### ğŸ“¦ Installation de Yarn

#### ğŸ§ Sur Ubuntu/Linux
```bash
npm install -g yarn
```

#### ğŸªŸ Sur Windows PowerShell (en tant qu'administrateur)
```powershell
# Modifier la politique d'exÃ©cution
Set-ExecutionPolicy -Scope CurrentUser -ExecutionPolicy Unrestricted

# Installer Chocolatey
Set-ExecutionPolicy Bypass -Scope Process -Force; 
[System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072; 
iex ((New-Object System.Net.WebClient).DownloadString('https://community.chocolatey.org/install.ps1'))

# Installer Yarn via Chocolatey
choco install yarn
```

---

## ğŸ“… Gestion des TÃ¢ches Cron

### âŒ DÃ©sactiver dÃ©finitivement Cron
```bash
# ArrÃªter le service Cron
sudo systemctl stop cron

# DÃ©sactiver au dÃ©marrage
sudo systemctl disable cron

# RedÃ©marrer le systÃ¨me
sudo reboot
```

### âœ… RÃ©activer Cron
```bash
# Activer le service au dÃ©marrage
sudo systemctl enable cron

# DÃ©marrer le service
sudo systemctl start cron

# RedÃ©marrer le systÃ¨me
sudo reboot
```

### ğŸ” VÃ©rifier le statut de Cron
```bash
# Statut du service
sudo systemctl status cron

# Voir les tÃ¢ches cron actives
crontab -l

# Ã‰diter les tÃ¢ches cron
crontab -e
```

---

## ğŸ“š Ressources et Documentation

### ğŸ”— Liens Utiles

| Service | Documentation |
|---------|---------------|
| **Nginx** | [Guide officiel WordPress](https://www.nginx.com/resources/wiki/start/topics/recipes/wordpress/) |
| **Bitnami** | [Manuel serveur Bitnami](https://docs.bitnami.com/aws/faq/administration/control-services/) |
| **Apache2** | [Configuration ports d'Ã©coute](https://www.it-connect.fr/changer-le-port-decoute-dapache2/) |
| **LEMP Stack** | [WordPress sur Ubuntu 20.04](https://www.linuxbabe.com/ubuntu/install-wordpress-ubuntu-20-04-nginx-mariadb-php7-4-lemp) |

### âš ï¸ Bonnes Pratiques de SÃ©curitÃ©

1. **ğŸ” Authentification forte**
   - Utiliser des mots de passe complexes
   - Activer l'authentification Ã  deux facteurs

2. **ğŸ›¡ï¸ Surveillance continue**
   - Monitoring des logs en temps rÃ©el
   - Scans antivirus rÃ©guliers
   - VÃ©rification des fichiers modifiÃ©s

3. **ğŸ”„ Mises Ã  jour rÃ©guliÃ¨res**
   - SystÃ¨me d'exploitation
   - Serveur web (Nginx/Apache)
   - PHP et extensions
   - WordPress et plugins

4. **ğŸ’¾ Sauvegardes**
   - Sauvegarde quotidienne des bases de donnÃ©es
   - Sauvegarde des fichiers web
   - Test de restauration rÃ©gulier

---

## ğŸš¨ ProcÃ©dures d'Urgence

### ğŸ”§ DÃ©pannage Rapide

#### Site inaccessible
```bash
# VÃ©rifier les services
sudo systemctl status nginx
sudo systemctl status php7.4-fpm

# RedÃ©marrer si nÃ©cessaire
sudo systemctl restart nginx
sudo systemctl restart php7.4-fpm
```

#### ProblÃ¨mes de permissions
```bash
# Corriger les permissions WordPress
sudo chown -R www-data:www-data /var/www/skiillzv2
sudo chmod -R 755 /var/www/skiillzv2
sudo chmod -R 644 /var/www/skiillzv2/wp-content
```

#### Saturation disque
```bash
# VÃ©rifier l'espace disque
df -h

# Nettoyer les logs anciens
sudo find /var/log -name "*.log" -type f -mtime +30 -delete
sudo find /var/log -name "*.gz" -type f -mtime +30 -delete
```

---

## ğŸ“ Support et Maintenance

### ğŸ” Commandes de Diagnostic Essentielles
```bash
# Ressources systÃ¨me
htop
free -h
df -h

# Logs systÃ¨me
sudo tail -f /var/log/syslog
sudo tail -f /var/log/nginx/error.log
sudo tail -f /var/log/php7.4-fpm.log

# ConnectivitÃ© rÃ©seau
netstat -tulpn
ss -tulpn
```

### ğŸ“Š Monitoring Continu
- **CPU/RAM** : Surveillance toutes les 5 minutes
- **Espace disque** : VÃ©rification quotidienne
- **Logs d'erreur** : Analyse en temps rÃ©el
- **SÃ©curitÃ©** : Scan antivirus hebdomadaire

---

*Document gÃ©nÃ©rÃ© le 2025-08-06 08:03:09 UTC par Gerardetienne - Version 3.0*



# ğŸ› ï¸ Documentation Technique ComplÃ¨te

> **Auteur :** Gerardetienne  
> **Date de crÃ©ation :** 2025-08-06  
> **DerniÃ¨re mise Ã  jour :** 2025-08-06 08:05:09 UTC  
> **Version :** 4.0

---

## ğŸ“‹ Table des MatiÃ¨res

1. [ğŸ“ Gestion Moodle](#-gestion-moodle)
2. [ğŸŒ Configuration Bitnami](#-configuration-bitnami)
3. [ğŸ”’ Certificats SSL et Nginx](#-certificats-ssl-et-nginx)
4. [ğŸ˜ WordPress Administration](#-wordpress-administration)
5. [â˜ï¸ Services Cloud AWS](#ï¸-services-cloud-aws)
6. [ğŸ”§ Configuration PHP](#-configuration-php)
7. [ğŸ“š Outils de DÃ©veloppement](#-outils-de-dÃ©veloppement)
8. [ğŸ” SEO et Testing](#-seo-et-testing)

---

## ğŸ“ Gestion Moodle

### âŒ DÃ©sactivation du Cron Moodle

Pour dÃ©sactiver le cron Moodle et prÃ©venir l'exÃ©cution automatique des tÃ¢ches :

#### ğŸ”§ MÃ©thode 1 : Renommer le fichier cron
```bash
# Naviguer vers le rÃ©pertoire CLI
cd /var/www/html/admin/cli

# Renommer le fichier pour le dÃ©sactiver
mv cron.php cron.php.disabled
```

#### ğŸ› ï¸ MÃ©thode 2 : DÃ©sactiver via systemd
```bash
/lib/systemd/systemd-sysv-install disable cron
```

### ğŸ˜ Configuration PHP Zend
> ğŸ“– **Documentation :** [Zend PHP 7.4 Installation](https://help.zend.com/zendphp/current/content/installation/zendphpctl.htm)

---

## ğŸŒ Configuration Bitnami

> ğŸ“– **Documentation officielle :** [Bitnami AWS Administration](https://docs.bitnami.com/aws/faq/administration/generate-configure-certificate-letsencrypt/)

### ğŸ” GÃ©nÃ©ration de certificats SSL

#### Ã‰tape 1 : GÃ©nÃ©ration avec Certbot
```bash
# GÃ©nÃ©rer le certificat SSL
sudo certbot certonly --webroot -w /opt/bitnami/wordpress/ --apache -d test-web.eufonie.fr

# RedÃ©marrer Apache
sudo /opt/bitnami/ctlscript.sh restart apache
```

#### Ã‰tape 2 : Configuration SSL manuelle
```bash
# Ã‰diter la configuration SSL
sudo nano /opt/bitnami/apache/conf/bitnami/bitnami-ssl.conf

# VÃ©rifier la configuration du renouvellement
cat /etc/letsencrypt/renewal/test-web.eufonie.fr.conf
```

#### ğŸ› ï¸ Utilisation de l'outil Bitnami
```bash
sudo /opt/bitnami/bncert-tool
```

### ğŸ“ Configuration VirtualHost SSL
```apache
<VirtualHost _default_:443>
  DocumentRoot "/opt/bitnami/apache/htdocs"
  SSLEngine on
  
  # Certificats SSL
  SSLCertificateFile "/opt/bitnami/apache/conf/bitnami/certs/server.crt"
  SSLCertificateKeyFile "/opt/bitnami/apache/conf/bitnami/certs/server.key"
  
  # Ou pour Let's Encrypt
  # SSLCertificateFile "/etc/letsencrypt/live/test-web.eufonie.fr/cert.pem"
  # SSLCertificateKeyFile "/etc/letsencrypt/live/test-web.eufonie.fr/privkey.pem"

  <Directory "/opt/bitnami/apache/htdocs">
    Options Indexes FollowSymLinks
    AllowOverride All
    Require all granted
  </Directory>

  # Pages d'erreur personnalisÃ©es
  ErrorDocument 503 /503.html
</VirtualHost>
```

### ğŸ” VÃ©rification des certificats
```bash
# Rechercher les certificats existants
sudo grep -irl "$(openssl s_client -verify_quiet -showcerts -connect test-web.eufonie.fr:443 2>/dev/null | sed -n '/BEGIN/,/END/{p;/END/q}' | head -n 3 | tail -n 2)" /opt/bitnami/letsencrypt /etc/letsencrypt
```

---

## ğŸ”’ Certificats SSL et Nginx

### ğŸŒ Configuration Multi-domaine

#### Objectif : Rediriger `jobs.eufonie.fr` vers `www.eufonie.fr/jobs`

#### Ã‰tape 1 : Configuration Nginx
```bash
# CrÃ©er le fichier de configuration
sudo nano /etc/nginx/sites-available/jobs.eufonie.fr
```

##### Configuration de redirection
```nginx
server {
    listen 80;
    listen [::]:80;
    server_name jobs.eufonie.fr;

    location / {
        rewrite ^/(.*)$ https://www.eufonie.fr/jobs/$1 permanent;
    }
}
```

#### Ã‰tape 2 : Activation du site
```bash
# CrÃ©er le lien symbolique
sudo ln -s /etc/nginx/sites-available/jobs.eufonie.fr /etc/nginx/sites-enabled/

# VÃ©rifier la configuration
sudo nginx -t

# Recharger Nginx
sudo systemctl reload nginx
```

#### Ã‰tape 3 : Configuration DNS (AWS Route 53)
> ğŸŒ **Console AWS :** [Route 53 Hosted Zones](https://us-east-1.console.aws.amazon.com/route53/v2/hostedzones?region=eu-west-2#ListRecordSets/Z2CUI5E8J1EHYG)

### ğŸ” Gestion des certificats SSL

#### Test de renouvellement
```bash
certbot renew --dry-run
```

#### GÃ©nÃ©ration pour nouveau domaine
```bash
# Ajouter le certificat au domaine principal
sudo certbot --nginx -d www.eufonie.fr

# Recharger Nginx
sudo systemctl reload nginx
```

#### ğŸ” VÃ©rification et maintenance
```bash
# Voir l'Ã©tat des certificats
sudo certbot certificates

# Renouvellement forcÃ©
sudo certbot renew --force-renewal

# Renouvellement avec rechargement automatique
sudo certbot renew --nginx && sudo systemctl reload nginx
```

#### ğŸ”„ Configuration WordPress (optionnel)
Dans **Outils â†’ Redirection** du back-office :
- **URL source :** `http://jobs.eufonie.fr`
- **Code HTTP :** `308 - Rediriger de faÃ§on permanente`
- **URL cible :** `https://www.eufonie.fr/jobs`

---

## ğŸ˜ WordPress Administration

### ğŸ”§ RÃ©solution erreur WP CLI

**Erreur :** `PHP Fatal error: Uncaught Error: Call to undefined function add_filter()`

> ğŸ“– **Issue GitHub :** [WP CLI Issue #3574](https://github.com/wp-cli/wp-cli/issues/3574)

#### Solution dans `wp-config.php`
```php
/** Absolute path to the WordPress directory. */
if ( ! defined( 'ABSPATH' ) ) {
    define( 'ABSPATH', __DIR__ . '/' );
}

/** Sets up WordPress vars and included files. */
require_once ABSPATH . 'wp-settings.php';

// Fix pour WP CLI
if ( defined( 'WP_CLI' ) ) {
    $_SERVER['HTTP_HOST'] = 'localhost';
}

// DÃ©sactiver temporairement si nÃ©cessaire
// add_filter('xmlrpc_enabled', '__return_false');
```

### ğŸ”‘ Reset de mot de passe via API

> ğŸ“– **Plugin WordPress :** [BDVS Password Reset](https://wordpress.org/plugins/bdvs-password-reset/)

#### ğŸ“§ Demande de reset
```javascript
$.ajax({
  url: '/wp-json/bdpwr/v1/reset-password',
  method: 'POST',
  data: {
    email: 'example@example.com',
  },
  success: function( response ) {
    console.log( response );
  },
  error: function( response ) {
    console.log( response );
  },
});
```

#### ğŸ” DÃ©finir nouveau mot de passe
```javascript
$.ajax({
  url: '/wp-json/bdpwr/v1/set-password',
  method: 'POST',
  data: {
    email: 'example@example.com',
    code: '1234',
    password: 'Pa$$word1',
  },
  success: function( response ) {
    console.log( response );
  },
  error: function( response ) {
    console.log( response );
  },
});
```

### âš¡ Optimisation compression Gzip/Brotli

> ğŸ’¬ **Guide dÃ©taillÃ© :** [Configuration Gzip WordPress](https://chatgpt.com/share/67288d33-5f5c-800d-9ab6-946aedce5612)

#### Configuration Nginx (`/etc/nginx/nginx.conf`)
```nginx
server {
    # Activation Gzip
    gzip on;
    gzip_types text/plain text/css application/json application/javascript text/xml application/xml+rss application/javascript;
    gzip_vary on;
    gzip_min_length 1000;
    gzip_comp_level 6;

    # Configuration spÃ©cifique pour ce domaine
}
```

#### ğŸ§ª Test de compression
```bash
# VÃ©rifier la configuration
sudo nginx -t
sudo systemctl reload nginx

# Tester la compression Gzip
curl -H "Accept-Encoding: gzip" -I http://votre-site.com
```

---

## â˜ï¸ Services Cloud AWS

### ğŸ› ï¸ Installation AWS CLI (Ubuntu 24.04)

#### Installation complÃ¨te
```bash
# Mise Ã  jour du systÃ¨me
sudo apt update

# Installation des dÃ©pendances
sudo apt install -y python3 python3-pip unzip

# TÃ©lÃ©chargement d'AWS CLI
curl "https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip" -o "awscliv2.zip"

# Extraction et installation
unzip awscliv2.zip
sudo ./aws/install

# VÃ©rification
aws --version

# Configuration
aws configure
```

#### ğŸ“ Copie de fichiers S3
```bash
# Syntax gÃ©nÃ©rale
aws s3 cp ./nom_file_Ã _copier s3://your_compartiment_bucket/nom_file_Ã _copier

# Exemple
aws s3 cp ./backup.sql s3://mon-bucket/backups/backup.sql
```

### ğŸ’¾ Configuration EFS (Elastic File System)

> ğŸ“– **Documentation AWS :** [EFS Auto Mount](https://docs.aws.amazon.com/fr_fr/efs/latest/ug/mount-fs-auto-mount-update-fstab.html)

#### CrÃ©ation d'un service systemd pour montage automatique

##### Ã‰tape 1 : CrÃ©er le service
```bash
sudo nano /etc/systemd/system/mount-efs.service
```

##### Ã‰tape 2 : Configuration du service
```ini
[Unit]
Description=Mount EFS at startup
After=network.target

[Service]
Type=oneshot
ExecStart=/bin/mount -t nfs4 -o nfsvers=4.1,rsize=1048576,wsize=1048576,hard,timeo=600,retrans=2,noresvport 10.0.0.87:/ /efs
RemainAfterExit=true

[Install]
WantedBy=multi-user.target
```

##### Ã‰tape 3 : Activation du service
```bash
# Recharger systemd
sudo systemctl daemon-reload

# Activer le service au dÃ©marrage
sudo systemctl enable mount-efs.service

# Tester le service
sudo systemctl start mount-efs.service
sudo systemctl status mount-efs.service
```

### ğŸ—„ï¸ Import de base de donnÃ©es
```bash
# Import MySQL depuis AWS RDS
mysql --verbose -u admin -p skiillz --host=database_your_host.af-south-1.rds.amazonaws.com < db_backup20241124_11_00.sql

# Connexion directe
mysql -h database_your_host.af-south-1.rds.amazonaws.com -u admin -p

# CrÃ©er un utilisateur WordPress
wp user create gerardetiennedev gerarddev@eufonie.fr --role=administrator
```

---

## ğŸ”§ Configuration PHP

### ğŸ”„ Changement de version PHP

#### VÃ©rifier les versions installÃ©es
```bash
update-alternatives --list php
```
**Sortie type :**
```
/usr/bin/php8.0
/usr/bin/php8.3
```

#### Changer la version active
```bash
# Changer vers PHP 8.3
sudo update-alternatives --set php /usr/bin/php8.3

# VÃ©rifier la version
php -v
```

### ğŸŒ Configuration Apache pour PHP

#### Basculer les modules Apache
```bash
# DÃ©sactiver PHP 8.0
sudo a2dismod php8.0

# Activer PHP 8.3
sudo a2enmod php8.3

# RedÃ©marrer Apache
sudo systemctl restart apache2
```

### ğŸ“¤ Augmentation des limites d'upload

#### Configuration PHP 8.3
```bash
# Ã‰diter la configuration PHP
sudo nano /etc/php/8.3/apache2/php.ini
```

#### ParamÃ¨tres recommandÃ©s
```ini
upload_max_filesize = 128M
post_max_size = 128M
max_execution_time = 300
max_input_time = 300
memory_limit = 256M
```

#### RedÃ©marrage des services
```bash
sudo systemctl restart apache2
```

### ğŸ” Permissions Moodle
```bash
sudo chown -R www-data:www-data sessions cache localcache muc
sudo chmod -R 770 sessions cache localcache muc
```

### ğŸ“¦ Extraction d'archives

> ğŸ“– **Guide :** [DÃ©compresser tar.gz - Kinsta](https://kinsta.com/fr/base-de-connaissances/decompresser-tar-gz/)

```bash
# Extraction fichier tar.gz
tar -xvf filename.tar.gz
```

---

## ğŸ“š Outils de DÃ©veloppement

### ğŸ“Š ChartBrew

#### ğŸ³ DÃ©marrage avec Docker
```bash
# Build des conteneurs
docker compose build

# Lancement des services
docker compose up
```

### ğŸ“– Docusaurus

#### Workflow de dÃ©veloppement
```bash
# AprÃ¨s modification des fichiers Markdown
# 1. ArrÃªter le serveur (Ctrl + C)

# 2. Nettoyer le cache
npm run clear

# 3. RedÃ©marrer en mode dÃ©veloppement
npm run dev

# 4. Pour les commits Git
cd "C:\MyProject\Docu-skiillz\Skiillz-docs"
```

---

## ğŸ” SEO et Testing

### ğŸ“± Test des rÃ©seaux sociaux
**Outil Facebook :** [Facebook Debugger](https://developers.facebook.com/tools/debug/?q=https%3A%2F%2Fwww.skiillz.com%2Frecherche-demploi-5-erreurs-courantes-a-eviter-sur-un-cv)

### ğŸ¨ Projet Adobe XD
**Maquettes :** [Adobe XD Project](https://xd.adobe.com/view/6c78859c-b4b9-4348-b9b5-016d016a09ab-392b/screen/210350e5-8b4f-4361-998b-44c3dc447c15/)

---

## ğŸ“š Ressources et Documentation

### ğŸ”— Liens Essentiels

| Service | Documentation |
|---------|---------------|
| **Bitnami SSL** | [Generate SSL Certificate](https://docs.bitnami.com/aws/faq/administration/generate-configure-certificate-letsencrypt/) |
| **Let's Encrypt** | [Service Agreement](https://letsencrypt.org/documents/LE-SA-v1.2-November-15-2017.pdf) |
| **WordPress API** | [Password Reset Plugin](https://wordpress.org/plugins/bdvs-password-reset/) |
| **AWS EFS** | [Auto Mount Configuration](https://docs.aws.amazon.com/fr_fr/efs/latest/ug/mount-fs-auto-mount-update-fstab.html) |

### âš ï¸ Bonnes Pratiques

#### ğŸ” SÃ©curitÃ©
- **Sauvegardes rÃ©guliÃ¨res** des configurations
- **Test des configurations** avant mise en production
- **Monitoring des certificats** SSL
- **VÃ©rification des permissions** fichiers

#### ğŸš€ Performance
- **Activation de la compression** Gzip/Brotli
- **Optimisation des limites** PHP
- **Monitoring des ressources** serveur
- **Cache appropriÃ©** pour les applications

#### ğŸ› ï¸ Maintenance
- **Renouvellement automatique** des certificats
- **Mise Ã  jour rÃ©guliÃ¨re** des dÃ©pendances
- **Documentation** des changements
- **Tests de restauration** pÃ©riodiques

---

## ğŸš¨ ProcÃ©dures d'Urgence

### ğŸ”§ Diagnostic Rapide

#### Services indisponibles
```bash
# VÃ©rifier les services critiques
sudo systemctl status nginx apache2 mysql php8.3-fpm

# RedÃ©marrer si nÃ©cessaire
sudo systemctl restart nginx
sudo systemctl restart php8.3-fpm
```

#### ProblÃ¨mes SSL
```bash
# VÃ©rifier les certificats
sudo certbot certificates

# Renouvellement d'urgence
sudo certbot renew --force-renewal --nginx
```

#### Espace disque saturÃ©
```bash
# VÃ©rifier l'espace
df -h

# Nettoyage d'urgence
sudo find /var/log -name "*.log" -type f -mtime +7 -delete
sudo apt autoremove && sudo apt autoclean
```

---

## ğŸ“ Support et Maintenance

### ğŸ“Š Surveillance Continue

#### Services Ã  monitorer
- **Nginx/Apache** : Status et logs d'erreur
- **PHP-FPM** : Processus et mÃ©moire
- **MySQL** : Connexions et performances
- **Certificats SSL** : Expiration et validitÃ©

#### ğŸ“ˆ MÃ©triques importantes
- **CPU/RAM** : < 80% en utilisation normale
- **Espace disque** : > 20% libre recommandÃ©
- **Temps de rÃ©ponse** : < 2 secondes pour pages web
- **Uptime** : > 99.9% visÃ©

### ğŸ”„ Maintenance PrÃ©ventive

#### Hebdomadaire
- VÃ©rification des **logs d'erreur**
- Test de **sauvegarde/restauration**
- ContrÃ´le des **mises Ã  jour disponibles**

#### Mensuelle
- Renouvellement **certificats SSL**
- Nettoyage des **fichiers temporaires**
- Audit des **permissions fichiers**
- Test des **procÃ©dures d'urgence**

---

*Document gÃ©nÃ©rÃ© le 2025-08-06 08:05:09 UTC par Gerardetienne - Version 4.0*


</SimpleAuth>